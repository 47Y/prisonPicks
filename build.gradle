apply plugin: "java"
apply plugin: "jacoco"

sourceCompatibility = 1.8

version = '1.2.5'

repositories {
    mavenCentral()
    mavenLocal()
    maven {url('https://jitpack.io/')}
    maven {url('https://oss.sonatype.org/content/groups/public/')}
    maven {url('https://hub.spigotmc.org/nexus/content/repositories/snapshots/')}
    maven {url('http://maven.sk89q.com/repo/')}
}

jar {
        eachFile { copyDetails ->
        if (copyDetails.path == 'plugin.yml') {
            filter { line ->
                line.replace('{{version}}', "$version")
            }
        }
    }
}
    
jacoco {
    toolVersion = "0.7.9"
    //applyTo build
}

task applicationCodeCoverageReport(type:JacocoReport){
    executionData build
    sourceSets sourceSets.main
}

dependencies {

    compile group: "org.spigotmc",
            name: "spigot-api",
            version: "1.11.2-R0.1-SNAPSHOT"
                   
    compile group: "com.sk89q.worldguard",
            name: "worldguard-legacy",
            version: "6.2"
            
    compile group: "com.github.MnMaxon",
            name: "AutoPickup",
            version: "master-SNAPSHOT"
            
    compile group: "com.sk89q.worldedit",
            name: "worldedit-core",
            version: "6.1.4-SNAPSHOT"

    //testing dependencys
    testCompile group: "junit",
                name: "junit",
                version: "4.12"

    testCompile group: "org.powermock",
                name: "powermock-core",
                version: "1.7.0RC2"

    testCompile group: "org.powermock",
                name: "powermock-module-junit4",
                version: "1.7.0RC2"

    testCompile group: "org.powermock",
                name: "powermock-api-mockito2",
                version: "1.7.0RC2"

//    testCompile group: "org.jacoco",
//              name: "jacoco-maven-plugin",
//              version: "0.7.9"

}